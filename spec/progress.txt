# Ralph Progress Log

This file tracks progress, learnings, and patterns discovered across Ralph iterations.
Each iteration should APPEND to this file, never overwrite.

---

## Codebase Patterns

<!-- 
  Add patterns discovered about this codebase here.
  Future iterations read this section FIRST.
-->

- **Component Style:** React functional components with TypeScript
- **Styling:** Tailwind CSS utility classes
- **State Management:** React useState/useContext (no external state library)
- **File Naming:** PascalCase for components, camelCase for utilities
- **Exports:** Use barrel files (index.ts) for clean imports

---

## Gotchas & Warnings

<!--
  Add things that caused issues or took extra time.
  Helps future iterations avoid the same mistakes.
-->

- Remember to run `npm run typecheck` before committing
- Tailwind dynamic classes need to be in safelist or use full class names
- This project uses path aliases: `@/` maps to `src/`

---

## Progress Entries

<!--
  Each iteration appends a new entry below.
  Format:

  ## YYYY-MM-DD HH:MM - [Task ID]
  - What was implemented
  - Files changed
  - Any issues encountered
  - Patterns or learnings discovered
-->

## 2026-01-23 - US-001
- Installed dependencies: dexie, date-fns, react-hot-toast
- Files changed: package.json, package-lock.json
- All packages added successfully to dependencies
- npm run typecheck passes

## 2026-01-23 16:15 - US-002
- Defined TypeScript types in src/types/index.ts
- Added Priority type: 'low' | 'medium' | 'high'
- Added FilterType type: 'current' | 'overdue' | 'completed'
- Added Task interface with all required fields (id, title, description, completed, priority, dueDate, estimatedMinutes, consumedMinutes, createdAt, updatedAt)
- Files changed: src/types/index.ts, spec/prd.json
- npm run typecheck passes
- Pattern: All types exported from single index.ts file for clean imports

## 2026-01-23 16:16 - US-003
- Created Dexie database in src/db/index.ts
- Database name: todoApp
- Table: tasks with auto-increment id
- Indexes: completed, priority, dueDate, createdAt
- Created comprehensive tests in src/db/index.test.ts
- Files changed: src/db/index.ts, src/db/index.test.ts, src/test/setup.ts, package.json
- Added fake-indexeddb for testing IndexedDB in Node environment
- Pattern: Boolean fields cannot be directly queried in IndexedDB, use filter() instead
- npm run typecheck passes
- npm run test passes (8/8 tests)

## 2026-01-23 16:19 - US-004
- Created useTasks hook in src/hooks/useTasks.tsx
- Returns tasks, isLoading, addTask, updateTask, deleteTask, toggleComplete
- Uses useLiveQuery from dexie-react-hooks for reactive task updates
- addTask creates tasks with auto timestamps and default priority of medium
- deleteTask and toggleComplete show toast notifications with Undo button (5s duration)
- Undo functionality restores deleted tasks or reverts completion state
- Files changed: src/hooks/useTasks.tsx, src/hooks/useTasks.test.tsx, package.json
- Added dexie-react-hooks dependency
- Pattern: Hooks with JSX (toast render functions) must use .tsx extension
- Pattern: Toast undo buttons use inline styles with purple accent color (#a78bfa)
- npm run typecheck passes
- npm run test passes (13/13 tests)

## 2026-01-23 - US-005
- Configured Tailwind custom theme in tailwind.config.js
- Added custom colors: navy-800 (#1e293b), navy-900 (#0f172a), purple-accent (#8b5cf6), blue-accent (#3b82f6)
- Added custom shadow: shadow-card (0 2px 8px rgba(0,0,0,0.08))
- Files changed: tailwind.config.js
- Pattern: Custom colors and shadows extend Tailwind's default theme
- npm run typecheck passes

## 2026-01-23 16:31 - US-006
- Created TaskTableHeader component in src/components/TaskTableHeader.tsx
- Four columns: Task (flex-1), Estimated (w-28), Consumed (w-28), Status (w-24)
- Sticky header with bg-gray-50/80 backdrop-blur effect
- text-xs uppercase text-gray-500 font-medium tracking-wide styling
- Rounded-t-xl border-b border-gray-100
- Exported from src/components/index.ts
- Updated App.tsx to display component for visual verification
- Files changed: src/components/TaskTableHeader.tsx, src/components/index.ts, src/App.tsx
- Pattern: Component follows functional React pattern with Tailwind utilities
- npm run typecheck passes (all tests pass)

## 2026-01-23 16:42 - US-007
- Created TaskRow component in src/components/TaskRow.tsx
- Installed lucide-react for icons (play, check, trash)
- Props: task, onToggle, onUpdate, onDelete
- Layout: checkbox, priority dot, title, estimated time, consumed time, action icons
- Checkbox: rounded-md border-2, checked state shows purple bg with checkmark
- Priority dots: high=red, medium=amber, low=gray
- Time format helper: 1hr 30m (compact format)
- Action icons appear on hover with opacity transition
- Completed tasks: line-through, text-gray-400
- Hover state: bg-gray-50 transition-colors
- Files changed: src/components/TaskRow.tsx, src/components/index.ts, src/App.tsx, package.json
- Pattern: Used lucide-react for consistent icon system
- Pattern: Helper function formatTime() provides compact time display
- Pattern: getPriorityColor() maps priority to Tailwind color classes
- npm run typecheck passes

## 2026-01-23 16:43 - US-008
- Created TaskDateGroup component in src/components/TaskDateGroup.tsx
- Props: label, count, tasks, onToggle, onUpdate, onDelete
- Header format: "TODAY (4)" in text-xs font-semibold text-gray-500 uppercase tracking-wider
- Collapsible with chevron icon, smooth rotate transition
- Card wrapper: bg-white rounded-xl shadow-card overflow-hidden
- Renders TaskRow for each task inside card
- mb-6 spacing between groups
- Exported from src/components/index.ts
- Updated App.tsx for visual verification
- Updated App.test.tsx to match new component
- Files changed: src/components/TaskDateGroup.tsx, src/components/index.ts, src/App.tsx, src/App.test.tsx
- Pattern: useState for collapse state, ChevronDown icon from lucide-react
- npm run typecheck passes
- npm run test passes (13/13 tests)

## 2026-01-23 16:44 - US-009
- Created TaskInput component in src/components/TaskInput.tsx
- Props: onAddTask with title and optional dueDate
- Layout: Plus icon + input field + Set deadline button
- Input: border-0 focus:ring-0, placeholder text-gray-400
- Deadline button: text-sm text-gray-500 hover:text-purple-600, calendar icon
- Date picker appears on deadline click with native date input
- Enter key submits and clears input
- Card styling: bg-white rounded-xl shadow-card p-4
- Exported from src/components/index.ts
- Updated App.tsx for visual verification
- Files changed: src/components/TaskInput.tsx, src/components/index.ts, src/App.tsx
- Pattern: Used lucide-react Plus and Calendar icons
- Pattern: State management with useState for title, dueDate, and showDatePicker
- npm run typecheck passes
- npm run test passes (13/13 tests)

## 2026-01-23 17:14 - US-010
- Created FilterTabs component in src/components/FilterTabs.tsx
- Props: filter (FilterType), onFilterChange callback, counts object
- Three tabs: Current, Overdue, Completed with count badges
- Active tab: font-medium text-navy-900 border-b-2 border-purple-600
- Inactive tabs: text-gray-500 hover:text-gray-700
- Horizontal flex layout with gap-8
- Count badges: bg-gray-100 rounded-full px-2 text-xs ml-2
- Exported from src/components/index.ts
- Updated App.tsx with useState for filter state and FilterTabs demo
- Files changed: src/components/FilterTabs.tsx, src/components/index.ts, src/App.tsx
- Pattern: Tab component uses button elements with dynamic className based on active state
- npm run typecheck passes
- npm run test passes (13/13 tests)

